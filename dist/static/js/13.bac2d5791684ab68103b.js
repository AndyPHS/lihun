webpackJsonp([13],{Ml8U:function(e,t,s){"use strict";(function(e){var a=s("mtWM"),l=s.n(a),i=s("g3lQ"),r=s("rb8n"),o=s("A+nQ");t.a={components:{HeadMenu:r.a},data:()=>({testform:{title:"",type:null,re:null,status:null,placeholder:""},pageInfo:[{id:"",title:"",type:"",other:"",imgs:[]}],titleSearchMsg:"",list:{id:"问题ID",title:"问题名称",type:"问题类型",other:"问题备注",imgs:"问题实例",control:"操作"},user:{title:"",type:null,re:null,imgs:null,status:null,placeholder:""},form:{file:""},add_answer:[],answerName:"",addQuestion_answer:[],addQuestion_answerName:"",problemType:{},problemRe:{},UserRole:[],chooseUserRole:[],min:"",dialogFormVisible:!1,dialogQuestionAdd:!1,formLabelWidth:"80px",first_page_url:"",last_page_url:"",next_page_url:"",path:"",from:1,per_page:null,last_page:null,userList:[],currentPage:1,pagesize:20,area:"",pageNum:1,fileList:[]}),mounted(){this.handleQuestionList(),this.QuestionArrOk()},methods:{handleQuestionList(){Object(o.J)({page:this.currentPage}).then(e=>{this.pageInfo=e.data.data.data,this.min=e.data.data}).catch(e=>{this.$router.replace("/")})},encodeSearchParams(e){const t=[];return Object.keys(e).forEach(s=>{let a=e[s];void 0===a?a="":"[object Object]"===Object.prototype.toString.call(e[s])?Object.keys(e[s]).forEach(a=>{t.push([a,encodeURIComponent(e[s][a])].join("="))}):Array.isArray(e[s])?t.push(s+"=["+e[s]+"]"):t.push([s,encodeURIComponent(a)].join("="))}),t.join("&")},titleSearch(){Object(o.K)("title="+this.titleSearchMsg).then(e=>{this.pageInfo=e.data.data.data,this.min=e.data.data,this.total=e.data.total}).catch(e=>{console.log(e)})},QuestionArrOk(){Object(o.c)().then(e=>{this.problemType=e.data.data.problemType,this.problemRe=e.data.data.problemRe})},add_answer_btn(){Object(o.d)({status:1,label:this.answerName}).then(e=>{this.selectOnlyQuestionList(),this.$message({type:"success",message:"成功添加选项!"}),this.answerName=""})},delete_answer_btn(e,t){localStorage.setItem("paid",e.id),Object(o.l)().then(e=>{this.$message({type:"success",message:"删除选项成功!"}),this.selectOnlyQuestionList()}).catch(e=>{})},addQuestion_answer_btn(e){this.addQuestion_answer.push({status:1,label:this.addQuestion_answerName,order:e});this.addQuestion_answer.sort(function(e,t){var s=e.order,a=t.order;return s<a?-1:s>a?1:0}),this.addQuestion_answerName=""},deleteQuestion_answer_btn(e){this.addQuestion_answer.splice(e,1)},handleSizeChange(e){this.pagesize=e},handleCurrentChange(e){this.currentPage=e},handleQuestionAdd(){localStorage.removeItem("pid"),this.user.title="",this.user.type="",this.user.placeholder="",this.user.status="",this.dialogQuestionAdd=!0},onBeforeUpload(e){const t="image/jpeg"===e.type||"image/gif",s=e.size/1024/1024<1;return t||this.$message.error("上传文件只能是图片格式!"),s||this.$message.error("上传文件大小不能超过 1MB!"),t&&s},addNewQuestion(){const t=new FormData;let s=e("#file")[0].files;for(var a=0;a<s.length;a++)console.log(s[a]),t.append("imgs["+a+"]",s[a]);t.append("title",this.user.title),t.append("type",this.user.type),t.append("placeholder",this.user.placeholder),t.append("status",this.user.status),1==this.user.type&&t.append("re",this.user.re),Object(o.g)(t).then(e=>{this.user.title="",this.user.type="",this.user.re="",this.user.placeholder="",this.user.status="",this.handleQuestionList(),localStorage.setItem("pid",e.data.data),this.$message({type:"success",message:"成功添加问题!"}),localStorage.removeItem("pid"),this.dialogQuestionAdd=!1}).catch(e=>{})},updateQuestion(e){localStorage.setItem("pid",e.id),this.user.title=e.title,this.user.type=e.type,this.user.re=e.re,this.user.placeholder=e.placeholder,this.user.status=e.status,this.dialogFormVisible=!0,6!=this.user.type&&7!=this.user.type&&8!=this.user.type&&9!=this.user.type||this.selectOnlyQuestionList()},selectOnlyQuestionList(){Object(o.H)().then(e=>{this.add_answer=e.data.child}).catch(e=>{})},handleCheckedCitiesChange(e){this.chooseUserRole=e},updataQuestionMsg(){const t=new FormData;let s=e("#fileUpdate")[0].files;for(var a=0;a<s.length;a++)t.append("imgs["+a+"]",s[a]);t.append("title",this.user.title),t.append("type",this.user.type),t.append("placeholder",this.user.placeholder),t.append("status",this.user.status),1==this.user.type?(t.append("re",this.user.re),Object(o.T)(t).then(e=>{this.user.title="",this.user.type=null,this.user.re=null,this.user.placeholder="",this.user.status=null,localStorage.removeItem("pid"),this.handleQuestionList(),this.dialogFormVisible=!1})):6==this.user.type||7==this.user.type||8==this.user.type||9==this.user.type?Object(o.T)(t).then(e=>{this.user.title="",this.user.type=null,this.user.status=null,this.user.placeholder="",localStorage.removeItem("pid"),this.handleQuestionList(),this.dialogFormVisible=!1}):(t.append("re",this.user.re),Object(o.T)(t).then(e=>{this.user.title="",this.user.type=null,this.user.placeholder="",this.user.status=null,this.user.re=null,localStorage.removeItem("pid"),this.handleQuestionList(),this.dialogFormVisible=!1}))},deleteQuestion(e){this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(o.r)(e).then(e=>{this.handleQuestionList()}),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleRemove(e,t){},fileChange(e,t){console.log(e),console.log(t),this.form.file=e.raw,this.fileList=t;const s="image/jpeg"===e.raw.type||"image/png"===e.raw.type||"image/gif"===e.raw.type,a=e.size/1024/1024<1;if(!s)return this.$message.error("上传文件只能是图片格式!"),!1;if(!a)return this.$message.error("上传文件大小不能超过 1MB!"),!1;var l=new FileReader;l.readAsDataURL(e.raw),l.onload=function(e){}},exceedFile(e,t){this.$message.warning(`当前限制选择 3 个文件，本次选择了 ${e.length} 个文件，共选择了 ${e.length+t.length} 个文件`)},beforeRemove(e,t){return this.$confirm(`确定移除 ${e.name}？`)},handleSuccess(e,t,s){console.log(e),console.log(t),console.log(s),this.$notify.success({title:"成功",message:"文件上传成功"}),this.imageUrl=URL.createObjectURL(t.raw)},handleError(e,t,s){this.$notify.error({title:"错误",message:"文件上传失败"})},changeInfo(t){var s=new FormData(this.$refs.form);let a={headers:{Authorization:"bearer "+localStorage.getItem("token")}};l.a.post(i.a.addQuestion,s,a).then(t=>(e("#form1").serialize(),console.log(t),!1))}}}}).call(t,s("7t+N"))},k7gI:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Ml8U"),l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("head-menu"),e._v(" "),s("div",{staticClass:"container mx-auto"},[s("div",{staticClass:"text-lg relative my-2"},[s("el-form",[s("el-form-item",{attrs:{label:""}},[s("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off",placeholder:"请输入问题名称"},model:{value:e.titleSearchMsg,callback:function(t){e.titleSearchMsg=t},expression:"titleSearchMsg"}})],1),e._v(" "),s("el-button",{staticClass:"absolute top-0 right-0 bottom-0",attrs:{type:"primary",plain:""},on:{click:e.titleSearch}},[e._v("搜索问题")])],1)],1),e._v(" "),s("div",{staticClass:"py-1 text-lg relative my-2"},[e._v("问题列表"),s("el-button",{staticClass:"absolute top-0 right-0 bottom-0",attrs:{type:"primary",plain:""},on:{click:e.handleQuestionAdd}},[e._v("新增问题")])],1),e._v(" "),s("div",{staticClass:"text-center h-500"},[s("table",{staticClass:"w-full"},[s("thead",[s("tr",e._l(e.list,function(t){return s("td",{key:t.index,staticClass:"headstyle w-1/6 text-center border text-black font-bold py-2"},[e._v(e._s(t))])}),0)]),e._v(" "),s("tbody",e._l(e.pageInfo,function(t,a){return s("tr",{key:a},[s("td",{staticClass:"border text-black"},[e._v(e._s(t.id))]),e._v(" "),s("td",{staticClass:"border text-black"},[e._v(e._s(t.title))]),e._v(" "),s("td",{staticClass:"border text-black"},[e._v(e._s(e.problemType[t.type]))]),e._v(" "),s("td",{staticClass:"border text-black"},[e._v("无备注")]),e._v(" "),null!==t.imgs?s("td",{staticClass:"border text-black"},e._l(JSON.parse(t.imgs),function(e,t){return s("div",{key:t},[s("img",{attrs:{src:e}})])}),0):e._e(),e._v(" "),null==t.imgs||t.imgs==[]?s("td",{staticClass:"border text-black"},[e._v("\n                                无实例\n                            ")]):e._e(),e._v(" "),s("td",{staticClass:"border text-black justify-around"},[s("div",{staticClass:"flex justify-around py-1 mx-auto"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(s){return e.updateQuestion(t)}}}),e._v(" "),s("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(s){return e.deleteQuestion(t.id)}}})],1)])])}),0)])]),e._v(" "),s("el-pagination",{staticClass:"my-10",attrs:{background:"",layout:"prev, pager, next","page-size":e.pagesize,"current-page":e.currentPage,total:this.min.total},on:{"current-change":e.handleQuestionList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),e._v(" "),s("el-dialog",{attrs:{title:"新增问题",visible:e.dialogQuestionAdd},on:{"update:visible":function(t){e.dialogQuestionAdd=t}}},[s("el-form",{attrs:{model:e.user}},[s("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:e.user.title,callback:function(t){e.$set(e.user,"title",t)},expression:"user.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[s("el-select",{staticClass:"w-1/2",attrs:{placeholder:"选择问题类型"},model:{value:e.user.type,callback:function(t){e.$set(e.user,"type",t)},expression:"user.type"}},e._l(e.problemType,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"注释","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:e.user.placeholder,callback:function(t){e.$set(e.user,"placeholder",t)},expression:"user.placeholder"}})],1),e._v(" "),1==e.user.type?s("el-form-item",{attrs:{label:"验证类型","label-width":e.formLabelWidth}},[s("el-select",{attrs:{placeholder:"选择输入类型"},model:{value:e.user.re,callback:function(t){e.$set(e.user,"re",t)},expression:"user.re"}},e._l(e.problemRe,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"示例图","label-width":e.formLabelWidth}},[s("input",{attrs:{name:"imgs",multiple:"",type:"file",id:"file"}})]),e._v(" "),6==e.user.type||7==e.user.type||8==e.user.type||9==e.user.type?s("div",[e._l(e.addQuestion_answer,function(t,a){return s("div",{key:a,staticClass:"flex justify-between "},[s("el-form-item",{attrs:{label:"选项名称","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off",disabled:!0},model:{value:t.label,callback:function(s){e.$set(t,"label",s)},expression:"item.label"}})],1),e._v(" "),s("div",[s("el-button",{on:{click:function(t){return e.deleteQuestion_answer_btn(a)}}},[e._v("删除")])],1)],1)}),e._v(" "),s("div",{staticClass:"flex justify-between"},[s("el-form-item",{attrs:{label:"选项名称","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:e.addQuestion_answerName,callback:function(t){e.addQuestion_answerName=t},expression:"addQuestion_answerName"}})],1),e._v(" "),s("div",[s("el-button",{on:{click:function(t){return e.addQuestion_answer_btn(e.index)}}},[e._v("添加")])],1)],1)],2):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"是否禁用","label-width":e.formLabelWidth}},[s("el-radio-group",{model:{value:e.user.status,callback:function(t){e.$set(e.user,"status",t)},expression:"user.status"}},[s("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogQuestionAdd=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.addNewQuestion}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改问题",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{attrs:{model:e.user}},[s("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:e.user.title,callback:function(t){e.$set(e.user,"title",t)},expression:"user.title"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[s("el-select",{staticClass:"w-1/2",attrs:{placeholder:"选择问题类型"},model:{value:e.user.type,callback:function(t){e.$set(e.user,"type",t)},expression:"user.type"}},e._l(e.problemType,function(t,a){return s("el-option",{key:a,attrs:{label:t,value:a}},[e._v(e._s(t))])}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"注释","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:e.user.placeholder,callback:function(t){e.$set(e.user,"placeholder",t)},expression:"user.placeholder"}})],1),e._v(" "),1==e.user.type?s("el-form-item",{attrs:{label:"验证类型","label-width":e.formLabelWidth}},[s("el-select",{attrs:{placeholder:"选择输入类型"},model:{value:e.user.re,callback:function(t){e.$set(e.user,"re",t)},expression:"user.re"}},e._l(e.problemRe,function(t,a){return s("el-option",{key:a,attrs:{label:t,value:a}},[e._v(e._s(t))])}),1)],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"示例图","label-width":e.formLabelWidth}},[s("input",{attrs:{name:"imgs",multiple:"",type:"file",id:"fileUpdate"}})]),e._v(" "),6==e.user.type||7==e.user.type||8==e.user.type||9==e.user.type?s("div",[e._l(e.add_answer,function(t,a){return s("div",{key:a,staticClass:"flex justify-between"},[s("el-form-item",{attrs:{label:"选项名称","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off",disabled:!0},model:{value:t.label,callback:function(s){e.$set(t,"label",s)},expression:"item.label"}})],1),e._v(" "),s("div",[s("el-button",{on:{click:function(s){return e.delete_answer_btn(t,a)}}},[e._v("删除")])],1)],1)}),e._v(" "),s("div",{staticClass:"flex justify-between"},[s("el-form-item",{attrs:{label:"选项名称","label-width":e.formLabelWidth}},[s("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:e.answerName,callback:function(t){e.answerName=t},expression:"answerName"}})],1),e._v(" "),s("div",[s("el-button",{on:{click:e.add_answer_btn}},[e._v("添加")])],1)],1)],2):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"是否禁用","label-width":e.formLabelWidth}},[s("el-radio-group",{model:{value:e.user.status,callback:function(t){e.$set(e.user,"status",t)},expression:"user.status"}},[s("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.updataQuestionMsg}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var i=function(e){s("nAdp")},r=s("VU/8")(a.a,l,!1,i,"data-v-05d590e4",null);t.default=r.exports},nAdp:function(e,t){}});
//# sourceMappingURL=13.bac2d5791684ab68103b.js.map