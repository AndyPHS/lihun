webpackJsonp([24],{AZQY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("rb8n"),i=a("A+nQ"),l={data:()=>({questionnaireType:{},QuestionnaireSelectArr:[{}],formLabelWidth:"80px",dialogNewWenJuan:!1,dialogEditWenJuan:!1,OfqpListData:[],addMsg:{title:"",type:null,description:"",purpose:"",status:null,Ofqp:[]}}),name:"WenJuan",components:{HeadMenu:s.a},mounted(){this.getQuestionnaire(),this.getQuestionnaireSelect()},methods:{getQuestionnaireSelect(){Object(i.B)().then(t=>{200==t.data.status_code?this.QuestionnaireSelectArr=t.data.data:this.$message({message:"问卷获取失败",type:"error"})}).catch(t=>{})},getQuestionnaire(){Object(i.z)().then(t=>{200==t.data.status_code?this.questionnaireType=t.data.data.questionnaireType:this.$message({message:"问卷类型获取失败",type:"error"})}).catch(t=>{})},addNewWenJuan(){this.dialogNewWenJuan=!0,this.addMsg.title="",this.addMsg.type=null,this.addMsg.description="",this.addMsg.purpose="",this.addMsg.status=null},addQuestionnaireOk(){Object(i.h)({title:this.addMsg.title,type:this.addMsg.type,description:this.addMsg.description,purpose:this.addMsg.purpose,status:this.addMsg.status}).then(t=>{200==t.data.status_code?(this.dialogNewWenJuan=!1,this.getQuestionnaireSelect(),this.$message({message:"添加成功",type:"success"})):this.$message({message:"新增失败，请联系管理员",type:"error"})}).catch(t=>{})},cancelAddQuestionnaire(){this.dialogNewWenJuan=!1},checkGuanLian(t,e){localStorage.setItem("qid",e.id),this.$router.replace("/GuanLianManagement")},checkModel(t,e){localStorage.setItem("wid",e.wid),localStorage.setItem("qid",e.id),this.$router.replace("/DisplayRule")},checkLabel(t,e){localStorage.setItem("qid",e.id),this.$router.replace("/LabelManagement")},EditWenJuan(t,e){this.dialogEditWenJuan=!0,this.addMsg.title=e.title,this.addMsg.type=e.type,this.addMsg.description=e.description,this.addMsg.purpose=e.purpose,this.addMsg.status=e.status,this.addMsg.Ofqp=e.Ofqp,localStorage.setItem("qid",e.id),Object(i.L)().then(t=>{this.OfqpListData=t.data.data.data}).catch(t=>{console.log("请求失败")})},EditQuestionnaireOk(){Object(i.U)({title:this.addMsg.title,type:this.addMsg.type,description:this.addMsg.description,purpose:this.addMsg.purpose,status:this.addMsg.status,Ofqp:JSON.stringify(this.addMsg.Ofqp)}).then(t=>{200==t.data.status_code?(localStorage.removeItem("qid"),this.dialogNewWenJuan=!1,this.getQuestionnaireSelect(),this.$message({message:"修改成功",type:"success"}),this.dialogEditWenJuan=!1):this.$message({message:"修改失败，请联系管理员",type:"error"})}).catch(t=>{})},cancelEditQuestionnaire(){this.dialogEditWenJuan=!1},DeleteWenJuan(t,e){localStorage.setItem("qid",e.id),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i.s)().then(t=>{200==t.data.status_code?(localStorage.removeItem("qid"),this.getQuestionnaireSelect(),this.$message({message:"删除成功",type:"success",duration:1e3})):this.$message.error("删除失败，请联系管理员")}).catch(t=>{this.$message.error("删除失败，请联系管理员")})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("head-menu"),t._v(" "),a("div",{staticClass:"container mx-auto"},[a("div",{staticClass:"text-right"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addNewWenJuan}},[t._v("新增问卷")])],1),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.QuestionnaireSelectArr,height:"500"}},[a("el-table-column",{attrs:{label:"ID",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"问卷名称",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[t._v("创建人: "+t._s(e.row.createdUid))]),t._v(" "),a("p",[t._v("创建时间: "+t._s(e.row.createdTime))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v(t._s(e.row.title))])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"问卷类型",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.questionnaireType[e.row.type]))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"关联管理",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px",display:"inline-block",cursor:"pointer"},on:{click:function(a){return t.checkGuanLian(e.$index,e.row)}}},[t._v("查看关联")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"word模板",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px",display:"inline-block",cursor:"pointer"},on:{click:function(a){return t.checkModel(e.$index,e.row)}}},[t._v("查看模板")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"标签池",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px",display:"inline-block",cursor:"pointer"},on:{click:function(a){return t.checkLabel(e.$index,e.row)}}},[t._v("查看标签")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.EditWenJuan(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.DeleteWenJuan(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"新增问卷",visible:t.dialogNewWenJuan},on:{"update:visible":function(e){t.dialogNewWenJuan=e}}},[a("el-form",{attrs:{model:t.addMsg}},[a("el-form-item",{staticClass:"mb-1",attrs:{label:"问卷名称","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:t.addMsg.title,callback:function(e){t.$set(t.addMsg,"title",e)},expression:"addMsg.title"}})],1),t._v(" "),a("el-form-item",{staticClass:"mb-1",attrs:{label:"问卷类型","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addMsg.type,callback:function(e){t.$set(t.addMsg,"type",e)},expression:"addMsg.type"}},t._l(t.questionnaireType,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"mb-1",attrs:{label:"备注","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:t.addMsg.description,callback:function(e){t.$set(t.addMsg,"description",e)},expression:"addMsg.description"}})],1),t._v(" "),a("el-form-item",{staticClass:"mb-1",attrs:{label:"功能用途","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:t.addMsg.purpose,callback:function(e){t.$set(t.addMsg,"purpose",e)},expression:"addMsg.purpose"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否可用","label-width":t.formLabelWidth}},[a("el-radio-group",{model:{value:t.addMsg.status,callback:function(e){t.$set(t.addMsg,"status",e)},expression:"addMsg.status"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("否")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelAddQuestionnaire}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addQuestionnaireOk}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改问卷",visible:t.dialogEditWenJuan},on:{"update:visible":function(e){t.dialogEditWenJuan=e}}},[a("el-form",{attrs:{model:t.addMsg}},[a("el-form-item",{staticClass:"mb-1",attrs:{label:"问卷名称","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:t.addMsg.title,callback:function(e){t.$set(t.addMsg,"title",e)},expression:"addMsg.title"}})],1),t._v(" "),a("el-form-item",{staticClass:"mb-1",attrs:{label:"问卷类型","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.addMsg.type,callback:function(e){t.$set(t.addMsg,"type",e)},expression:"addMsg.type"}},t._l(t.questionnaireType,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:e}})}),1)],1),t._v(" "),a("el-form-item",{staticClass:"mb-1",attrs:{label:"备注","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:t.addMsg.description,callback:function(e){t.$set(t.addMsg,"description",e)},expression:"addMsg.description"}})],1),t._v(" "),a("el-form-item",{staticClass:"mb-1",attrs:{label:"功能用途","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"w-1/2",attrs:{autocomplete:"off"},model:{value:t.addMsg.purpose,callback:function(e){t.$set(t.addMsg,"purpose",e)},expression:"addMsg.purpose"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否可用","label-width":t.formLabelWidth}},[a("el-radio-group",{model:{value:t.addMsg.status,callback:function(e){t.$set(t.addMsg,"status",e)},expression:"addMsg.status"}},[a("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("否")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"问卷关联","label-width":t.formLabelWidth}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.addMsg.Ofqp,callback:function(e){t.$set(t.addMsg,"Ofqp",e)},expression:"addMsg.Ofqp"}},t._l(t.OfqpListData,function(t,e){return a("el-option",{key:e,attrs:{size:"small",label:t.title,value:t.id}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelEditQuestionnaire}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.EditQuestionnaireOk}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(t){a("qnXW")},"data-v-5eeef4b6",null);e.default=o.exports},qnXW:function(t,e){}});
//# sourceMappingURL=24.9b08c40a7985582898e0.js.map